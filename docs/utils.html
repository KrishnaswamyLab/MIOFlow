---

title: Utils


keywords: fastai
sidebar: home_sidebar

summary: "API details"
description: "API details"
nb_path: "02_utils.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 02_utils.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="group_extract" class="doc_header"><code>group_extract</code><a href="https://github.com/dsm-72/MIOFlow/tree/main/MIOFlow/utils.py#L11" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>group_extract</code>(<strong><code>df</code></strong>, <strong><code>group</code></strong>, <strong><code>index</code></strong>=<em><code>'samples'</code></em>, <strong><code>groupby</code></strong>=<em><code>'samples'</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="sample" class="doc_header"><code>sample</code><a href="https://github.com/dsm-72/MIOFlow/tree/main/MIOFlow/utils.py#L14" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>sample</code>(<strong><code>data</code></strong>, <strong><code>group</code></strong>, <strong><code>size</code></strong>=<em><code>(100,)</code></em>, <strong><code>replace</code></strong>=<em><code>False</code></em>, <strong><code>to_torch</code></strong>=<em><code>False</code></em>, <strong><code>use_cuda</code></strong>=<em><code>False</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="to_np" class="doc_header"><code>to_np</code><a href="https://github.com/dsm-72/MIOFlow/tree/main/MIOFlow/utils.py#L24" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>to_np</code>(<strong><code>data</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="generate_steps" class="doc_header"><code>generate_steps</code><a href="https://github.com/dsm-72/MIOFlow/tree/main/MIOFlow/utils.py#L27" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>generate_steps</code>(<strong><code>groups</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="set_seeds" class="doc_header"><code>set_seeds</code><a href="https://github.com/dsm-72/MIOFlow/tree/main/MIOFlow/utils.py#L30" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>set_seeds</code>(<strong><code>seed</code></strong>:<code>int</code>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="config_hold_out" class="doc_header"><code>config_hold_out</code><a href="https://github.com/dsm-72/MIOFlow/tree/main/MIOFlow/utils.py#L35" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>config_hold_out</code>(<strong><code>df</code></strong>:<code>DataFrame</code>, <strong><code>hold_out</code></strong>:<code>str</code>=<em><code>'random'</code></em>, <strong><code>hold_one_out</code></strong>:<code>bool</code>=<em><code>False</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="config_criterion" class="doc_header"><code>config_criterion</code><a href="https://github.com/dsm-72/MIOFlow/tree/main/MIOFlow/utils.py#L52" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>config_criterion</code>(<strong><code>criterion_name</code></strong>:<code>str</code>=<em><code>'ot'</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_groups_from_df" class="doc_header"><code>get_groups_from_df</code><a href="https://github.com/dsm-72/MIOFlow/tree/main/MIOFlow/utils.py#L66" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_groups_from_df</code>(<strong><code>df</code></strong>, <strong><code>samples_key</code></strong>=<em><code>'samples'</code></em>, <strong><code>samples</code></strong>=<em><code>None</code></em>)</p>
</blockquote>
<h2 id="Arguments:">Arguments:<a class="anchor-link" href="#Arguments:"> </a></h2>
<pre><code>df (pd.DataFrame): DataFrame of shape (n_cells, n_genes), where the ordering of
    the columns `n_genes` corresponds to the columns of `principle_components`.
    It is assumed that the index of `df` are the cell types (but this need not be the case.
    See `cell_types`). If there are additional columns (e.g. `samples_key`, `cell_type_key`)
    should be after the gene columns.

samples_key (str): The name of the column in the `df` that corresponds to the time
    samples. Defaults to `"samples"`. If `df[samples_key]` throws a `KeyError`
    either because the `df` doesnt have this column in it or typo, will resort to
    `samples` to determine this.

samples (np.ndarray | list): List of timepoints where each value corresponds to the
    timepoint of the same row in `df`. Defaults to `None`.

</code></pre>
<h2 id="Returns:">Returns:<a class="anchor-link" href="#Returns:"> </a></h2>
<pre><code>groups (np.ndarray): List of time groups in order (e.g. `[0, 1, 2, 3, 4, 5, 6, 7]`).</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_cell_types_from_df" class="doc_header"><code>get_cell_types_from_df</code><a href="https://github.com/dsm-72/MIOFlow/tree/main/MIOFlow/utils.py#L101" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_cell_types_from_df</code>(<strong><code>df</code></strong>, <strong><code>cell_type_key</code></strong>=<em><code>None</code></em>, <strong><code>cell_types</code></strong>=<em><code>None</code></em>)</p>
</blockquote>
<h2 id="Arguments:">Arguments:<a class="anchor-link" href="#Arguments:"> </a></h2>
<pre><code>df (pd.DataFrame): DataFrame of shape (n_cells, n_genes), where the ordering of
    the columns `n_genes` corresponds to the columns of `principle_components`.
    It is assumed that the index of `df` are the cell types (but this need not be the case.
    See `cell_types`). If there are additional columns (e.g. `samples_key`, `cell_type_key`)
    should be after the gene columns.

cell_type_key (str): The column name in the provided DataFrame `df` the corresponds to the
    cell's cell types. Defaults to `None` which assumes the cell type is the index of the
    `df i.e. `df.index`

cell_types (np.ndarray | list): List of cell types to use from the provided DataFrame `df`.
    Defaults to `None`. If `use_cell_types = True` will attempt to figure this out from
    `cell_type_key`.

</code></pre>
<h2 id="Returns:">Returns:<a class="anchor-link" href="#Returns:"> </a></h2>
<pre><code>cell_types (np.ndarray): List of cell types.</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_sample_n_from_df" class="doc_header"><code>get_sample_n_from_df</code><a href="https://github.com/dsm-72/MIOFlow/tree/main/MIOFlow/utils.py#L138" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_sample_n_from_df</code>(<strong><code>df</code></strong>, <strong><code>n</code></strong>, <strong><code>samples_key</code></strong>=<em><code>'samples'</code></em>, <strong><code>samples</code></strong>=<em><code>None</code></em>, <strong><code>groups</code></strong>=<em><code>None</code></em>, <strong><code>drop_index</code></strong>=<em><code>False</code></em>)</p>
</blockquote>
<h2 id="Arguments:">Arguments:<a class="anchor-link" href="#Arguments:"> </a></h2>
<pre><code>df (pd.DataFrame): DataFrame of shape (n_cells, n_genes), where the ordering of
    the columns `n_genes` corresponds to the columns of `principle_components`.
    It is assumed that the index of `df` are the cell types (but this need not be the case.
    See `cell_types`). If there are additional columns (e.g. `samples_key`, `cell_type_key`)
    should be after the gene columns.

samples_key (str): The name of the column in the `df` that corresponds to the time
    samples. Defaults to `"samples"`. If `df[samples_key]` throws a `KeyError`
    either because the `df` doesnt have this column in it or typo, will resort to
    `samples` to determine this.

samples (np.ndarray | list): List of timepoints where each value corresponds to the
    timepoint of the same row in `df`. Defaults to `None`.

groups (np.ndarray): List of time groups in order (e.g. `[0, 1, 2, 3, 4, 5, 6, 7]`).
    Defaults to `None`. If `None` will attempt to figure this out from provided
    `samples_key` or `samples`.

drop_index (bool): Whether or not to drop index from `df`. Defaults to `False`.

</code></pre>
<h2 id="Returns:">Returns:<a class="anchor-link" href="#Returns:"> </a></h2>
<pre><code>counts_n (pd.DataFrame): subsetted `df` where all rows correspond to `sample==n`.</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_times_from_groups" class="doc_header"><code>get_times_from_groups</code><a href="https://github.com/dsm-72/MIOFlow/tree/main/MIOFlow/utils.py#L185" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_times_from_groups</code>(<strong><code>groups</code></strong>, <strong><code>where</code></strong>=<em><code>'start'</code></em>, <strong><code>start</code></strong>=<em><code>0</code></em>)</p>
</blockquote>
<h2 id="Arguments:">Arguments:<a class="anchor-link" href="#Arguments:"> </a></h2>
<pre><code>groups (list): the list of the numerical groups in the data, e.g.
    `[0, 1, 2, 3, 4]`, if the data has five groups.

where (str): Choices are `"start"`, and `"end"`. Defaults to `"end"`. Whether or not
    to start the trajectories at `t_0` (`"start"`) or `t_n` (`"end"`).

start (int): Defaults to `0`. Where in [`generate_tjnet_trajectories`](/MIOFlow/eval.html#generate_tjnet_trajectories) the trajectories started.
    This is used if attempting to generate outside of `t0`. Note this works relative to `where`.
    E.g. if `where="end"` and `start=0` then this is the same as `groups[-1]`.

</code></pre>
<p>Returns:
    times (list): The <code>groups</code> starting at <code>start</code> working from <code>end</code>.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

</div>


